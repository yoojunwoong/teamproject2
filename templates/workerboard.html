<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
   <meta name="description" content="Bootstrap Admin App">
   <meta name="keywords" content="app, responsive, jquery, bootstrap, dashboard, admin">
   <link rel="icon" type="image/x-icon" href="{% static 'img/favicon_orange.png' %}">
   <title>TRICK</title><!-- =============== VENDOR STYLES ===============-->
   <!-- FONT AWESOME-->
   <link rel="stylesheet" href="{% static 'vendor/@fortawesome/fontawesome-free/css/brands.css' %}">
   <link rel="stylesheet" href="{% static 'vendor/@fortawesome/fontawesome-free/css/regular.css' %}">
   <link rel="stylesheet" href="{% static 'vendor/@fortawesome/fontawesome-free/css/solid.css' %}">
   <link rel="stylesheet" href="{% static 'vendor/@fortawesome/fontawesome-free/css/fontawesome.css' %}"><!-- SIMPLE LINE ICONS-->
   <link rel="stylesheet" href="{% static 'vendor/simple-line-icons/css/simple-line-icons.css' %}"><!-- ANIMATE.CSS-->
   <link rel="stylesheet" href="{% static 'vendor/animate.css/animate.css' %}"><!-- WHIRL (spinners)-->
   <link rel="stylesheet" href="{% static 'vendor/whirl/dist/whirl.css' %}"><!-- =============== PAGE VENDOR STYLES ===============-->
   <!-- WEATHER ICONS-->
   <!-- =============== BOOTSTRAP STYLES ===============-->
   <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}" id="bscss"><!-- =============== APP STYLES ===============-->
   <link rel="stylesheet" href="{% static 'vendor/morris.js.so/morris.css' %}">
   <link rel="stylesheet" href="{% static 'css/app.css' %}" id="maincss">
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
   <script src="{% static 'js/app.js' %}"></script>
   <script>
     function showpiecharts(){
          $.ajax({
              url:'piecharts',
              async: false,
              datatype:'JSON',
              success:function(data){
                  var list = data.areas;
                  $('#cardtitle').text(data.today+'일자 담당구역별 허용 용량 비율(최대 300kg)')
                  for(var i =0; i<list.length; i++){
                     var  node ='';
                     if(list[i].percent == 0){
                           node = '<div class="col-lg-3 col-md-6"><div class="radial-bar radial-bar-0 radial-bar-lg radial-bar-success" data-label=';
                     }else if(list[i].percent <=5){
                           node = '<div class="col-lg-3 col-md-6"><div class="radial-bar radial-bar-5 radial-bar-lg radial-bar-success" data-label=';
                     }else if(list[i].percent <=10){
                           node = '<div class="col-lg-3 col-md-6"><div class="radial-bar radial-bar-10 radial-bar-lg radial-bar-success" data-label=';
                     }else if(list[i].percent <=15){
                           node = '<div class="col-lg-3 col-md-6"><div class="radial-bar radial-bar-15 radial-bar-lg radial-bar-warning" data-label=';
                     }else if(list[i].percent <=20){
                           node = '<div class="col-lg-3 col-md-6"><div class="radial-bar radial-bar-20 radial-bar-lg radial-bar-warning" data-label=';
                     }else if(list[i].percent <=25){
                           node = '<div class="col-lg-3 col-md-6"><div class="radial-bar radial-bar-25 radial-bar-lg radial-bar-warning" data-label=';
                     }else if(list[i].percent <=30){
                           node = '<div class="col-lg-3 col-md-6"><div class="radial-bar radial-bar-30 radial-bar-lg radial-bar-warning" data-label=';
                     }else if(list[i].percent <=35){
                           node = '<div class="col-lg-3 col-md-6"><div class="radial-bar radial-bar-35 radial-bar-lg radial-bar-warning" data-label=';
                     }else if(list[i].percent <=40){
                           node = '<div class="col-lg-3 col-md-6"><div class="radial-bar radial-bar-40 radial-bar-lg radial-bar-warning" data-label=';
                     }else if(list[i].percent <=45){
                           node = '<div class="col-lg-3 col-md-6"><div class="radial-bar radial-bar-45 radial-bar-lg radial-bar-warning" data-label=';
                     }else if(list[i].percent <=50){
                           node = '<div class="col-lg-3 col-md-6"><div class="radial-bar radial-bar-50 radial-bar-lg radial-bar-warning" data-label=';
                     }else if(list[i].percent <=55){
                           node = '<div class="col-lg-3 col-md-6"><div class="radial-bar radial-bar-55 radial-bar-lg radial-bar-danger" data-label=';
                     }else if(list[i].percent <=60){
                           node = '<div class="col-lg-3 col-md-6"><div class="radial-bar radial-bar-60 radial-bar-lg radial-bar-danger" data-label=';
                     }else if(list[i].percent <=65){
                           node = '<div class="col-lg-3 col-md-6"><div class="radial-bar radial-bar-65 radial-bar-lg radial-bar-danger" data-label=';
                     }else if(list[i].percent <=70){
                           node = '<div class="col-lg-3 col-md-6"><div class="radial-bar radial-bar-70 radial-bar-lg radial-bar-danger" data-label=';
                     }else if(list[i].percent <=75){
                           node = '<div class="col-lg-3 col-md-6"><div class="radial-bar radial-bar-75 radial-bar-lg radial-bar-danger" data-label=';
                     }else if(list[i].percent <=80){
                           node = '<div class="col-lg-3 col-md-6"><div class="radial-bar radial-bar-80 radial-bar-lg radial-bar-danger" data-label=';
                     }else if(list[i].percent <=85){
                           node = '<div class="col-lg-3 col-md-6"><div class="radial-bar radial-bar-85 radial-bar-lg radial-bar-danger" data-label=';
                     }else if(list[i].percent <=90){
                           node = '<div class="col-lg-3 col-md-6"><div class="radial-bar radial-bar-90 radial-bar-lg radial-bar-danger" data-label=';
                     }else if(list[i].percent <=95){
                           node = '<div class="col-lg-3 col-md-6"><div class="radial-bar radial-bar-95 radial-bar-lg radial-bar-danger" data-label=';
                     }else{
                           node = '<div class="col-lg-3 col-md-6"><div class="radial-bar radial-bar-100 radial-bar-lg radial-bar-danger" data-label=';
                     }
                     var pnode =list[i].percent+'%></div><p>'+list[i].city+' '+list[i].parent+' '+list[i].region+'</p></div>';
                     node +=pnode;
                     $('#parentnode').before($(node));
                  }
              }
          })
      };
      function showtables(){
         $.ajax({
              url:'tables',
              async: false,
              datatype:'JSON',
              success:function(data){
                  var list = data.list;
                  $('#tabletitle').text('다음 7,8월 담당 구역별 예상 배출량 표(kg)');
                  $('#th1').text('지역');
                  $('#th2').text('7월');
                  $('#th3').text('8월');

                  for(var i =0; i<list.length; i++){
                     $('#predtable > tbody:last').append('<tr><td style="text-align: center;">'+list[i].region+'</td><td style="text-align: center";>'+list[i].seven+'</td><td style="text-align: center";>'+list[i].eight+'</td></tr>');
                  }
              }
         })
      };

      $(document).ready(function(){
         showtables();
         showpiecharts();
      });
   </script>
</head>
<body>
   <div class="wrapper">
      <!-- top navbar-->
      <header class="topnavbar-wrapper">
         <!-- START Top Navbar-->
         <nav class="navbar topnavbar">
            <!-- START navbar header-->
            <div class="navbar-header"><a class="navbar-brand" href="#/">
                  <div class="brand-logo"><img class="img-fluid" src="{% static 'img/logomain.png' %}" alt="App Logo"></div>
                  <div class="brand-logo-collapsed"><img class="img-fluid" src="{% static 'img/icon.png' %}" alt="App Logo"></div>
               </a></div><!-- END navbar header-->
            <!-- START Left navbar-->
            <ul class="navbar-nav mr-auto flex-row">
               <li class="nav-item">
                  <!-- Button used to collapse the left sidebar. Only visible on tablet and desktops--><a class="nav-link d-none d-md-block d-lg-block d-xl-block" href="#" data-trigger-resize="" data-toggle-state="aside-collapsed"><em class="fas fa-bars"></em></a><!-- Button to show/hide the sidebar on mobile. Visible on mobile only.--><a class="nav-link sidebar-toggle d-md-none" href="#" data-toggle-state="aside-toggled" data-no-persist="true"><em class="fas fa-bars"></em></a>
               </li><!-- START User avatar toggle-->
               <li class="nav-item d-none d-md-block">
                  <!-- Button used to collapse the left sidebar. Only visible on tablet and desktops--><a class="nav-link" id="user-block-toggle" href="#user-block" data-toggle="collapse"><em class="icon-user"></em></a>
               </li><!-- END User avatar toggle-->
               <!-- Fullscreen (only desktops)-->
               <li class="nav-item d-none d-md-block"><a class="nav-link" href="#" data-toggle-fullscreen=""><em class="fas fa-expand"></em></a></li>
            </ul><!-- END Left navbar-->

         </nav><!-- END Top Navbar-->
      </header><!-- sidebar-->
      <aside class="aside-container">
         <!-- START Sidebar (left)-->
         <div class="aside-inner">
            <nav class="sidebar" data-sidebar-anyclick-close="">
               <!-- START sidebar nav-->
               <ul class="sidebar-nav">
                  <!-- START user info -->
                     <li class="has-user-block">
                     <div class="collapse" id="user-block">
                        <div class="item user-block">
                           <!-- User picture-->
                           {% if loginok %}
                              <div class="user-block-picture">
                              <div class="user-block-status">
                                 {% if type == 10 %}
                                    <img class="img-thumbnail rounded-circle" src="{% static 'img/user/normaluser.png' %}" alt="Avatar" width="60" height="60">
                                 {% else %}
                                    <img class="img-thumbnail rounded-circle" src="{% static 'img/user/enviruserimg.png' %}" alt="Avatar" width="60" height="60">
                                 {% endif %}
                                 <div class="circle bg-success circle-lg"></div>
                              </div>
                           </div><!-- Name and Job-->
                              <div class="user-block-info"><span class="user-block-name">hello, {{name}}</span>

                                 <span class="user-block-role">
                                    {% if type == 10 %}
                                       normal user
                                    {% else %}
                                       environmental worker
                                    {% endif %}
                                 </span></div>
                           {% else %}
                           <div style="text-align: center;"><a href="login"><button class="mb-1 btn btn-purple" type="button">Login</button></a></div>
                           {% endif %}
                        </div>
                     </div>
                  </li>
                  <!-- END user info-->
                  <!-- Iterates over all sidebar items-->
                  <li class="nav-heading "><span data-localize="sidebar.heading.HEADER">Main Navigation</span></li>
                  <li class=" "><a href="#dashboard" title="Dashboard" data-toggle="collapse" class="collapsed" aria-expanded="false">
                        <div class="float-right badge badge-success">new</div><em class="icon-compass"></em><span data-localize="sidebar.nav.DASHBOARD">Main</span>
                     </a>
                     <ul class="sidebar-nav sidebar-subnav collapse" id="dashboard" style="">
                        <li class=" "><a href="dashboard" title="Dashboard v1"><span>Jeju Data Analysis</span></a></li>
                     </ul>
                  </li>

                  {%if type == 00 %}
                  <li class=" "><a href="workerboard" title="Worker Board">
                        <div class="float-right badge badge-success">new</div><em class="icon-drop"></em><span data-localize="sidebar.nav.WIDGETS">Worker Board </span>
                     </a>
                  </li>
                  {% elif type == 10 %}
                  <li class=" "><a href="userboard" title="User Board">
                        <div class="float-right badge badge-success">new</div><em class="icon-chart"></em><span data-localize="sidebar.nav.WIDGETS">My Data Analysis</span>
                     </a>
                  </li>
                  {% endif %}
               </ul><!-- END sidebar nav-->
            </nav>
         </div><!-- END Sidebar (left)-->
      </aside>

      <section class="section-container">
         <!-- Page content-->
         <div class="content-wrapper">
            <div class="content-heading">
               <div>Worker Board<small data-localize="dashboard.WELCOME"></small></div>
            </div><!-- START card-->
            <div class="card mb-3 border-info">
               <div class="card-header text-white bg-primary" id="cardtitle">구역별 음식물 쓰레기 용량(300kg)</div>
               <div class="card-body text-center">
                  <div class="row" id="forpie">
                     <div class="col-lg-3" id="parentnode"></div>
                  </div>
               </div>
            </div>
            <div class="card border-primary card-demo" id="cardmap2">
                           <div class="card-header bg-primary"><a class="float-right" href="#" data-tool="card-refresh" data-toggle="tooltip" title="Refresh card"><em class="fas fa-sync"></em></a><a class="float-right" href="#" data-tool="card-collapse" data-toggle="tooltip" title="Collapse card"><em class="fa fa-minus"></em></a>
                              <div class="card-title" id ="tabletitle">지역별 예상 배출량 표(kg)</div>
                           </div>
                           <div class="card-wrapper">
                                 <div class="card-body">
                                    <table class="table table-striped table-bordered table-hover" id="predtable">
                                       <thead>
                                          <tr>
                                             <th id="th1" style="border-collapse : collapse;   text-align: center; ">지역</th>
                                             <th id="th2" style="border-collapse : collapse;   text-align: center; ">월</th>
                                             <th id="th3" style="border-collapse : collapse;   text-align: center; ">월</th>
                                          </tr>
                                       </thead>
                                       <tbody>
                                       </tbody>
                                    </table>
                                 </div>
                           </div>
                        </div>
         </div>
      </section>      <!-- Page footer-->
      <footer class="footer-container"><span>&copy; 2021 - TRICK</span></footer>
   </div><!-- =============== VENDOR SCRIPTS ===============-->
   <!-- MODERNIZR-->
   <script src="{% static 'vendor/modernizr/modernizr.custom.js' %}"></script><!-- STORAGE API-->
   <script src="{% static 'vendor/js-storage/js.storage.js' %}"></script><!-- SCREENFULL-->
   <script src="{% static 'vendor/screenfull/dist/screenfull.js' %}"></script><!-- i18next-->
   <script src="{% static 'vendor/i18next/i18next.js' %}"></script>
   <script src="{% static 'vendor/i18next-xhr-backend/i18nextXHRBackend.js' %}"></script>
   <script src="{% static 'vendor/jquery/dist/jquery.js' %}"></script>
   <script src="{% static 'vendor/popper.js/dist/umd/popper.js' %}"></script>
   <script src="{% static 'vendor/bootstrap/dist/js/bootstrap.js' %}"></script><!-- =============== PAGE VENDOR SCRIPTS ===============-->
   <!-- SLIMSCROLL-->
   <script src="{% static 'vendor/jquery-slimscroll/jquery.slimscroll.js' %}"></script><!-- SPARKLINE-->
   <script src="{% static 'vendor/jquery-sparkline/jquery.sparkline.js' %}"></script><!-- FLOT CHART-->
   <script src="{% static 'vendor/flot/jquery.flot.js' %}"></script>
   <script src="{% static 'vendor/jquery.flot.tooltip/js/jquery.flot.tooltip.js' %}"></script>
   <script src="{% static 'vendor/flot/jquery.flot.resize.js' %}"></script>
   <script src="{% static 'vendor/flot/jquery.flot.pie.js' %}"></script>
   <script src="{% static 'vendor/flot/jquery.flot.time.js' %}"></script>
   <script src="{% static 'vendor/flot/jquery.flot.categories.js' %}"></script>
   <script src="{% static 'vendor/jquery.flot.spline/jquery.flot.spline.js' %}"></script><!-- EASY PIE CHART-->
   <script src="{% static 'vendor/easy-pie-chart/dist/jquery.easypiechart.js' %}"></script><!-- MOMENT JS-->
   <script src="{% static 'vendor/moment/min/moment-with-locales.js' %}"></script>
   <script src="{% static 'js/app.js' %}"></script>

<!-- =============== APP SCRIPTS ===============-->
</body>

</html>